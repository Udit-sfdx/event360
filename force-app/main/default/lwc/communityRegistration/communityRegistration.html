<template>
    <div class="registration-page slds-p-around_medium">
        <lightning-card title="Organization Registration" icon-name="standard:account" class="registration-card">
            <div class="slds-p-around_medium">
                <template if:true={error}>
                    <div class="slds-notify slds-notify_alert slds-theme_error" role="alert">
                        <span class="slds-assistive-text">Error</span>
                        <h2 class="slds-text-body_regular">{error}</h2>
                    </div>
                </template>

                <form class="slds-form" onsubmit={handleRegistration}>
                    <div class="section-header slds-m-bottom_small">
                        <lightning-icon icon-name="standard:account" alternative-text="org" size="small"></lightning-icon>
                        <span class="section-title"> Organization</span>
                    </div>

                    <lightning-input
                        type="text"
                        label="Organization Name"
                        name="accountName"
                        value={accountName}
                        onchange={handleInputChange}
                        required
                        message-when-value-missing="Organization name is required.">
                    </lightning-input>

                    <lightning-input
                        type="tel"
                        label="Organization Contact"
                        name="accountPhone"
                        value={accountPhone}
                        placeholder= " +91 "
                        onchange={handleInputChange}
                        class="slds-m-top_small">
                    </lightning-input>

                    <lightning-input
                        type="url"
                        label="Website"
                        name="accountWebsite"
                        value={accountWebsite}
                        onchange={handleInputChange}
                        placeholder="https://example.com"
                        class="slds-m-top_small">
                    </lightning-input>

                    <lightning-textarea
                        label="Description"
                        name="accountDescription"
                        value={accountDescription}
                        onchange={handleInputChange}
                        class="slds-m-top_small"
                        placeholder="Short description of your organization (optional)">
                    </lightning-textarea>

                    <div class="section-header slds-m-top_large slds-m-bottom_small">
                        <lightning-icon icon-name="standard:user" alternative-text="contact" size="small"></lightning-icon>
                        <span class="section-title"> Primary Contact</span>
                    </div>

                    <div class="slds-grid slds-wrap slds-gutters_x-small">
                        <div class="slds-col slds-size_1-of-2">
                            <lightning-input
                                type="text"
                                label="First Name"
                                name="contactFirstName"
                                value={contactFirstName}
                                onchange={handleInputChange}
                                required>
                            </lightning-input>
                        </div>
                        <div class="slds-col slds-size_1-of-2">
                            <lightning-input
                                type="text"
                                label="Last Name"
                                name="contactLastName"
                                value={contactLastName}
                                onchange={handleInputChange}
                                required>
                            </lightning-input>
                        </div>
                    </div>

                    <lightning-input
                        type="email"
                        label="Email"
                        name="contactEmail"
                        value={contactEmail}
                        onchange={handleInputChange}
                        onblur={validateEmail}
                        required
                        placeholder= " abc@xyz.com "
                        class="slds-m-top_small"
                        message-when-value-missing="Email is required.">
                    </lightning-input>
                    <template if:true={emailError}>
                        <div class="slds-text-color_error slds-m-top_x-small">{emailError}</div>
                    </template>

                    <lightning-input
                        type="tel"
                        label="Personal Contact"
                        name="contactPhone"
                        placeholder= " +91 "
                        value={contactPhone}
                        onchange={handleInputChange}
                        class="slds-m-top_small">
                    </lightning-input>

                    <lightning-input
                        type="text"
                        label="Designation"
                        name="contactTitle"
                        value={contactTitle}
                        onchange={handleInputChange}
                        class="slds-m-top_small">
                    </lightning-input>

                    <div class="slds-m-top_large slds-grid slds-justify_center slds-align_absolute-center actions-row">
                        <lightning-button
                            variant="brand"
                            label={submitLabel}
                            title="Register"
                            onclick={handleRegistration}
                            disabled={isSubmitDisabled}>
                        </lightning-button>

                        <template if:true={isSubmitting}>
                            <div class="spinner-wrap slds-m-left_small">
                                <lightning-spinner alternative-text="Submitting" size="small"></lightning-spinner>
                            </div>
                        </template>

                        <lightning-button
                            variant="brand"
                            label="Reset"
                            class="slds-m-left_small"
                            onclick={resetForm}>
                        </lightning-button>
                    </div>
                </form>
            </div>
        </lightning-card>
    </div>
</template>
